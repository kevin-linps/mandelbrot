#include <stdio.h>
#include <string.h>
#include "../source/fixed_point.h"
#include "../source/mandelbrot.h"

int test1() 
{
	fixed real[] = {
		-42278584,
		-41909488,
		-41540392,
		-41171296,
		-40802200,
		-40433104,
		-40064008,
		-39694912,
		-39325816,
		-38956720,
		-38587624,
		-38218528,
		-37849432,
		-37480336,
		-37111240,
		-36742144,
		-36373048,
		-36003952,
		-35634856,
		-35265760,
		-34896664,
		-34527568,
		-34158472,
		-33789376,
		-33420280,
		-33051184,
		-32682088,
		-32312992,
		-31943896,
		-31574800,
		-31205704,
		-30836608,
		-30467512,
		-30098416,
		-29729320,
		-29360224,
		-28991128,
		-28622032,
		-28252936,
		-27883840,
		-27514744,
		-27145648,
		-26776552,
		-26407456,
		-26038360,
		-25669264,
		-25300168,
		-24931072,
		-24561976,
		-24192880,
		-23823784,
		-23454688,
		-23085592,
		-22716496,
		-22347400,
		-21978304,
		-21609208,
		-21240112,
		-20871016,
		-20501920,
		-20132824,
		-19763728,
		-19394632,
		-19025536,
		-18656440,
		-18287344,
		-17918248,
		-17549152,
		-17180056,
		-16810960,
		-16441864,
		-16072768,
		-15703672,
		-15334576,
		-14965480,
		-14596384,
		-14227288,
		-13858192,
		-13489096,
		-13120000,
		-12750904,
		-12381808,
		-12012712,
		-11643616,
		-11274520,
		-10905424,
		-10536328,
		-10167232,
		-9798136,
		-9429040,
		-9059944,
		-8690848,
		-8321752,
		-7952656,
		-7583560,
		-7214464,
		-6845368,
		-6476272,
		-6107176,
		-5738080,
		-5368984,
		-4999888,
		-4630792,
		-4261696,
		-3892600,
		-3523504,
		-3154408,
		-2785312,
		-2416216,
		-2047120,
		-1678024,
		-1308928,
		-939832,
		-570736,
		-201640,
		167456,
		536552,
		905648,
		1274744,
		1643840,
		2012936,
		2382032,
		2751128,
		3120224,
		3489320,
		3858416,
		4227512,
		4596608,
		4965704,
		5334800,
		5703896,
		6072992,
		6442088,
		6811184,
		7180280,
		7549376,
		7918472,
		8287568,
		8656664,
		9025760,
		9394856,
		9763952,
		10133048,
		10502144,
		10871240,
		11240336,
		11609432,
		11978528,
		12347624,
		12716720,
		13085816,
		13454912,
		13824008,
		14193104,
		14562200,
		14931296,
		15300392,
		15669488,
		16038584,
		16407680,
	};
	fixed imag = float2fixed(0.0f);
	rgb_pixel_t pixels[] = {
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 9, 1, 47 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 0, 0, 0 },
		{ 134, 181, 229 },
		{ 0, 7, 100 },
		{ 153, 87, 0 },
		{ 248, 201, 95 },
		{ 241, 233, 191 },
		{ 211, 236, 248 },
		{ 134, 181, 229 },
		{ 57, 125, 209 },
		{ 57, 125, 209 },
		{ 57, 125, 209 },
		{ 24, 82, 177 },
		{ 24, 82, 177 },
		{ 24, 82, 177 },
		{ 12, 44, 138 },
		{ 12, 44, 138 },
		{ 12, 44, 138 },
		{ 12, 44, 138 },
		{ 12, 44, 138 },
		{ 12, 44, 138 },
		{ 12, 44, 138 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
		{ 0, 7, 100 },
	};

	rgb_pixel_t test[IP_BLOCK_W];

	mbrot_compute(real, imag, test);

	return memcmp(pixels, test, IP_BLOCK_W * sizeof(rgb_pixel_t));
}

int main(int argc, char **argv)
{
	int result = test1();
	if (result == 0)
	{
		printf("\n----------------Test succeeded!------------------\n");
	}
	else
	{
		printf("\n----------------Test failed!---------------------\n");
	}
	return result;
}
